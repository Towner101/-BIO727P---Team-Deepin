{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>SNP Search</h2>
    <form method="post" id="snpSearchForm">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.search_option.label }}
            {% for option in form.search_option %}
                <div class="form-check">
                    {{ option() }} {{ option.label }}
                </div>
            {% endfor %}
        </div>

        <div class="form-group" id="snpIdsInput" style="display: none;">
            {{ form.snp_ids.label }}
            {{ form.snp_ids(class="form-control") }}
        </div>

        <div class="form-group" id="geneNamesInput" style="display: none;">
            {{ form.gene_names.label }}
            {{ form.gene_names(class="form-control") }}
        </div>

        <div class="form-group">
            {{ form.populations.label }}
            {{ form.populations(class="form-control", multiple=True) }}
        </div>

        <div class="form-group">
            {{ form.superpopulations.label }}
            {{ form.superpopulations(class="form-control", multiple=True) }}
        </div>

        <button type="submit" class="btn btn-primary">{{ form.submit.label }}</button>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const searchOptionRadios = document.getElementsByName("search_option");
    const snpIdsInput = document.getElementById("snpIdsInput");
    const geneNamesInput = document.getElementById("geneNamesInput");

    function toggleInputFields() {
        if (searchOptionRadios[0].checked) {
            snpIdsInput.style.display = "block";
            geneNamesInput.style.display = "none";
        } else if (searchOptionRadios[1].checked) {
            snpIdsInput.style.display = "none";
            geneNamesInput.style.display = "block";
        }
    }

    searchOptionRadios.forEach(radio => radio.addEventListener("change", toggleInputFields));
    toggleInputFields(); // Initial call to set the correct display state
});
</script>
{% endblock %}
